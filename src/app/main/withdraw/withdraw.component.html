<div class="fixed-center widget-box">

  <ng-container *ngIf="!isDone && !isDoneWithError" [formGroup]="transferForm">

    <app-progress-message [hidden]="!withdrawIsInProgress" #progressDialog></app-progress-message>

    <ng-container *ngIf="!withdrawIsInProgress">
      <h2>Place withdraw request</h2>

      <p>Published withdraw requests will be available for the challenge during the next {{challengeExpiresBlocks}}
        blocks.<br> You will be
        able to transfer funds to your account once that period is expired.</p>

      <mat-form-field appearance="outline" class="field">
        <mat-label>Enter amount of ETH</mat-label>
        <input matInput formControlName="toAmount" autocomplete="off">

        <mat-error *ngIf="toAmount.hasError('min')">
          Min amount is {{minAmount}} zpETH
        </mat-error>
        <mat-error *ngIf="toAmount.hasError('max')">
          You have only {{myZpBalance}} zpETH
        </mat-error>
      </mat-form-field>

      <ng-container *ngIf="myZpBalance">
        <div class="available-eth" style="margin-top: 1px;">Available {{myZpBalance}} zpETH</div>
      </ng-container>

      <div class="actions">
        <button mat-stroked-button routerLink="/main">Back</button>
        <button mat-flat-button color="accent" [disabled]="!transferForm.valid" (click)="onSendClick()">Send</button>
      </div>
    </ng-container>

  </ng-container>


  <ng-container *ngIf="isDone">
    <h3>Successful Withdrawal</h3>
    <img src="/assets/images/guy-faswkes-thanks.png" width="240px">
    <div class="actions">
      <button mat-stroked-button routerLink="/main">Back</button>
    </div>
  </ng-container>

  <ng-container *ngIf="isDoneWithError">
    <h2 class="title">Oops!<br>something went wrong</h2>
    <div>
      <img src="/assets/images/guy-fawkes-dont-know.png" width="240px">
    </div>
    <h3 class="title"></h3>
    <div class="actions">
      <button mat-stroked-button routerLink="/main">Back</button>
    </div>
  </ng-container>
</div>
